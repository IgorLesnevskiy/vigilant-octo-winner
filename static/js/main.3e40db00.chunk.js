(this["webpackJsonpvigilant-octo-winner"]=this["webpackJsonpvigilant-octo-winner"]||[]).push([[0],{289:function(e,t){},335:function(e,t,n){},338:function(e,t,n){},339:function(e,t,n){},340:function(e,t,n){},351:function(e,t,n){},407:function(e,t,n){},581:function(e,t,n){},582:function(e,t,n){},583:function(e,t,n){},584:function(e,t,n){},585:function(e,t,n){},588:function(e,t,n){},604:function(e,t){},626:function(e,t){},632:function(e,t,n){"use strict";n.r(t);var i={};n.r(i),n.d(i,"normalizeUser",(function(){return A})),n.d(i,"normalizeUsersList",(function(){return T}));var r={};n.r(r),n.d(r,"cityEntity",(function(){return V})),n.d(r,"normalizeCity",(function(){return Y})),n.d(r,"normalizeCitiesList",(function(){return H}));var a=n(1),c=n(120),o=n.n(c),s=n(34),l=n(128),u=n(193),d=(n(335),n(9)),v=n(54),m=n(323);n(338);var f=function(e){return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("div",{className:"page",children:Object(a.jsx)("div",{className:"page__inner",children:e.children})})})};n(339);var b=function(e){return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(f,{children:e.children})})},j=n(0),p=n.n(j),h=n(7),O=n(26),g=n.n(O),x=(n(340),function(e){var t=e.offsetTop,n=void 0===t?"small":t,i=e.offsetBottom,r=void 0===i?"small":i,c=e.fluid,o=void 0!==c&&c,s=e.extraClasses,l=void 0===s?[]:s,u=e.children;return Object(a.jsx)("div",Object(h.a)(Object(h.a)({className:g()("floor",l),"data-offset-top":n,"data-offset-bottom":r},o&&{"data-container-fluid":!0}),{},{children:Object(a.jsx)("div",{className:"floor__inner",children:u})}))}),y=n(17),k=n(42),_=n(121),w=n(18),C=n(33),N=n.n(C),S=n(92),E=n(65),q=n(53),F=n(130),I=n(129),D=n(303),L=n.n(D),M=function(){function e(t){var n=t.baseURL,i=void 0===n?"":n;Object(E.a)(this,e),this._base=i}return Object(q.a)(e,null,[{key:"generateSearchParamsString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return encodeURI(String(new URLSearchParams(e)))}},{key:"isObject",value:function(e){return"[object Object]"===Object.prototype.toString.call(e)}}]),Object(q.a)(e,[{key:"get",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this._buildAbsoluteUrl(e,t);return fetch(i,{headers:n})}},{key:"_buildAbsoluteUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new URL(L()("".concat(this._base).concat(e)));return this.constructor.isObject(t)&&Object.keys(t).length&&(n.search=this.constructor.generateSearchParamsString(t)),String(n)}}]),e}(),B=new(function(e){Object(F.a)(n,e);var t=Object(I.a)(n);function n(){return Object(E.a)(this,n),t.call(this,{baseURL:"https://igorlesnevskiy.github.io/vigilant-octo-winner"})}return Object(q.a)(n,[{key:"getUserById",value:function(e){return this.get("/data/users.json").then((function(e){return e.json()})).then((function(t){var n=t.find((function(t){return t.id===e}));return{data:null!==n&&void 0!==n?n:null}})).catch((function(e){throw new Error(e)}))}},{key:"updateUserById",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return console.log(e,t),Promise.resolve()}},{key:"getUsersList",value:function(){return this.get("/data/users.json").then((function(e){return e.json()})).then((function(e){return{data:null!==e&&void 0!==e?e:null}})).catch((function(e){throw new Error(e)}))}}]),n}(M)),U=new(function(e){Object(F.a)(n,e);var t=Object(I.a)(n);function n(){return Object(E.a)(this,n),t.call(this,{baseURL:"https://igorlesnevskiy.github.io/vigilant-octo-winner"})}return Object(q.a)(n,[{key:"getCityById",value:function(e){return this.get("/data/cities.json").then((function(e){return e.json()})).then((function(t){var n=t.find((function(t){return t.id===e}));return{data:null!==n&&void 0!==n?n:null}})).catch((function(e){throw new Error(e)}))}},{key:"getCitiesList",value:function(){return this.get("/data/cities.json").then((function(e){return e.json()})).then((function(e){return{data:null!==e&&void 0!==e?e:null}})).catch((function(e){throw new Error(e)}))}}]),n}(M)),P=n(43),z=new P.b.Entity("user",{},{processStrategy:function(e,t,n){var i,r,a,c,o,s,l,u,d=e.id,v=e.attributes,m=v.touched;return{id:d,active:v.active,name:v.name,status:v.status,email:v.email,cityID:v.city_id,avatar:{imageID:v.avatar,alt:v.name,title:v.name},personalAgreement:!!v.agreements.personal,createdBy:null!==(i=null===m||void 0===m||null===(r=m.created)||void 0===r?void 0:r.id)&&void 0!==i?i:null,createdTime:null!==(a=null===m||void 0===m||null===(c=m.created)||void 0===c?void 0:c.time)&&void 0!==a?a:null,modifiedBy:null!==(o=null===m||void 0===m||null===(s=m.modified)||void 0===s?void 0:s.id)&&void 0!==o?o:null,modifiedTime:null!==(l=null===m||void 0===m||null===(u=m.modified)||void 0===u?void 0:u.time)&&void 0!==l?l:null}}});function A(e){return Object(P.a)(e,z)}function T(e){return Object(P.a)(e,[z])}var R,V=new P.b.Entity("cities",{},{processStrategy:function(e,t,n){var i,r,a,c,o,s,l,u,d=e.id,v=e.attributes,m=v.touched;return{id:d,name:v.name,population:v.population,createdBy:null!==(i=null===m||void 0===m||null===(r=m.created)||void 0===r?void 0:r.id)&&void 0!==i?i:null,createdTime:null!==(a=null===m||void 0===m||null===(c=m.created)||void 0===c?void 0:c.time)&&void 0!==a?a:null,modifiedBy:null!==(o=null===m||void 0===m||null===(s=m.modified)||void 0===s?void 0:s.id)&&void 0!==o?o:null,modifiedTime:null!==(l=null===m||void 0===m||null===(u=m.modified)||void 0===u?void 0:u.time)&&void 0!==l?l:null}}});function Y(e){return Object(P.a)(e,V)}function H(e){return Object(P.a)(e,[V])}var W=Object(s.b)("users/getUserById",function(){var e=Object(S.a)(N.a.mark((function e(t,n){var i,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.rejectWithValue,e.prev=1,e.next=4,B.getUserById(t);case 4:return r=e.sent,e.abrupt("return",r.data);case 8:e.prev=8,e.t0=e.catch(1),i(e.t0.response.data);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}(),{condition:function(e,t){var n=t.getState,i=(t.extra,n().users.requests[e]);if("fulfilled"===i||"loading"===i)return!1}}),$=Object(s.c)({name:"users",initialState:{entities:{},ids:[],requests:{}},reducers:{},extraReducers:(R={},Object(w.a)(R,W.pending,(function(e,t){var n=t.meta.arg;e.requests[n]="pending"})),Object(w.a)(R,W.fulfilled,(function(e,t){var n,r,a,c=t.meta.arg;if(t.payload){var o=i.normalizeUser(t.payload);(null===o||void 0===o||null===(n=o.entities)||void 0===n?void 0:n.user)&&(e.requests[c]="fulfilled",e.ids.includes(c)||e.ids.push(c),e.entities=Object(h.a)(Object(h.a)({},e.entities),null!==(r=null===o||void 0===o||null===(a=o.entities)||void 0===a?void 0:a.user)&&void 0!==r?r:{}))}else e.requests[c]="rejected"})),Object(w.a)(R,W.rejected,(function(e,t){t.error;var n=t.meta.arg;e.requests[n]="rejected"})),R)});Object(_.a)($.actions);var J,K=$.reducer,Z=n(325),G=n(122),Q=n.n(G),X=Object(s.b)("cities/getCityById",function(){var e=Object(S.a)(N.a.mark((function e(t,n){var i,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.rejectWithValue,e.prev=1,e.next=4,U.getCityById(t);case 4:return r=e.sent,e.abrupt("return",r.data);case 8:e.prev=8,e.t0=e.catch(1),i(e.t0.response.data);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}(),{condition:function(e,t){var n=t.getState,i=(t.extra,n().cities.requests[e]);if("fulfilled"===i||"loading"===i)return!1}}),ee=Object(s.b)("cities/getCitiesList",function(){var e=Object(S.a)(N.a.mark((function e(t,n){var i,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.rejectWithValue,e.prev=1,e.next=4,U.getCitiesList();case 4:return r=e.sent,e.abrupt("return",r.data);case 8:e.prev=8,e.t0=e.catch(1),i(e.t0.response.data);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}(),{condition:function(e,t){var n=t.getState,i=(t.extra,n().cities.requests.list);if("fulfilled"===i||"loading"===i)return!1}}),te=Object(s.c)({name:"cities",initialState:{entities:{},ids:[],requests:{}},reducers:{},extraReducers:(J={},Object(w.a)(J,X.pending,(function(e,t){var n=t.meta.arg;e.requests[n]="pending"})),Object(w.a)(J,X.fulfilled,(function(e,t){var n,i,a,c=t.meta.arg;if(t.payload){var o=r.normalizeCity(t.payload);(null===o||void 0===o||null===(n=o.entities)||void 0===n?void 0:n.cities)&&(e.requests[c]="fulfilled",e.ids.includes(c)||e.ids.push(c),e.entities=Object(h.a)(Object(h.a)({},e.entities),null!==(i=null===o||void 0===o||null===(a=o.entities)||void 0===a?void 0:a.cities)&&void 0!==i?i:{}))}else e.requests[c]="rejected"})),Object(w.a)(J,X.rejected,(function(e,t){t.error;var n=t.meta.arg;e.requests[n]="rejected"})),Object(w.a)(J,ee.pending,(function(e,t){e.requests.list="pending"})),Object(w.a)(J,ee.fulfilled,(function(e,t){var n,i,a;if(t.payload){var c=r.normalizeCitiesList(t.payload);(null===c||void 0===c||null===(n=c.entities)||void 0===n?void 0:n.cities)&&(e.requests.list="fulfilled",e.ids=Q()(e.ids,c.result,{arrayMerge:function(e,t,n){return Object(Z.a)(new Set(e.concat(t)))}}),e.entities=Q()(e.entities,null!==(i=null===c||void 0===c||null===(a=c.entities)||void 0===a?void 0:a.cities)&&void 0!==i?i:{}))}else e.requests.list="rejected"})),Object(w.a)(J,ee.rejected,(function(e,t){t.error,t.meta;e.requests.list="rejected"})),J)});Object(_.a)(te.actions);var ne=te.reducer,ie=n(123),re=(n(351),n(27)),ae=n.n(re),ce=(n(407),n(324)),oe=(n(581),n(320)),se=(n(582),function(e){var t=e.name,n=void 0===t?"foo":t,i=e.options,r=void 0===i?[]:i,c=e.value,o=e.onChange,s=void 0===o?Function.prototype:o,l=Object(j.useState)(!1),u=Object(y.a)(l,2),d=u[0],v=u[1];Object(j.useEffect)((function(){return d&&document.addEventListener("click",p),function(){document.removeEventListener("click",p)}}),[d]);var m=Object(j.useMemo)((function(){return function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!Array.isArray(i))return null;return null!==(e=null===(t=i.find((function(e){return e.value===n})))||void 0===t?void 0:t.label)&&void 0!==e?e:null}(c,r)}),[c,r]),f=Object(j.useCallback)((function(e,t){v(!1),s(e)}),[c,s]),b=Object(j.useCallback)((function(e){v(!d)}),[d]),p=Object(j.useCallback)((function(e){e.target.closest(".select__list")||v(!1)}),[]);if(!r.length)return null;var h=r.map((function(e){return Object(a.jsx)("option",{value:e.value,children:e.label},e.value)})),O=r.map((function(e){var t=c===e.value;return Object(a.jsx)("li",{className:g()("select__list-item",t&&"is-selected"),onClick:function(t){return f(e.value,t)},children:e.label},e.value)}));return Object(a.jsxs)("div",{className:"select",children:[Object(a.jsxs)("div",{className:g()("select__input",!c&&"is-empty"),onClick:b,children:[Object(a.jsx)("div",{className:"select__input-value",children:c?m:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435"}),Object(a.jsx)("div",{className:"select__input-arrow",children:Object(a.jsx)(oe.a,{icon:["fas",d?"chevron-up":"chevron-down"]})})]}),d&&Object(a.jsx)("ul",{className:"select__list",children:O}),Object(a.jsx)("div",{className:"select__native",children:Object(a.jsx)("select",{name:n,value:c,readOnly:!0,children:h})})]})});n(583);var le=function(e){var t=e.type,n=void 0===t?null:t,i=e.value,r=e.required,c=void 0!==r&&r,o=e.placeholder,s=void 0===o?null:o,l=e.onChange,u=void 0===l?Function.prototype:l,d=e.errors,v=void 0===d?[]:d,m=Object(j.useCallback)((function(e){u(e.target.value)}),[u]);return Object(a.jsxs)("div",{className:g()("text-input",!!v.length&&"is-error"),children:[Object(a.jsx)("input",{className:"text-input__input",type:n,value:i,required:c,placeholder:s,onChange:m}),!!v.length&&Object(a.jsx)("ul",{className:"text-input__errors-list",children:v.map((function(e){return Object(a.jsx)("li",{className:"text-input__error",children:e},e)}))})]})};n(584);var ue=function(e){var t=e.value,n=e.required,i=void 0!==n&&n,r=e.label,c=e.errors,o=void 0===c?[]:c,s=e.onChange,l=void 0===s?Function.prototype:s,u=Object(j.useCallback)((function(e){l(e.target.checked)}),[l]);return Object(a.jsxs)("label",{className:g()("checkbox-input",!!o.length&&"is-error"),children:[Object(a.jsxs)("span",{className:"checkbox-input__input",children:[Object(a.jsx)("input",{type:"checkbox",checked:t,onChange:u,required:i}),Object(a.jsx)("span",{className:"checkbox-input__control"})]}),Object(a.jsx)("span",{className:"checkbox-input__label",children:r}),!!o.length&&Object(a.jsx)("ul",{className:"checkbox-input__errors-list",children:o.map((function(e){return Object(a.jsx)("li",{className:"checkbox-input__error",children:e},e)}))})]})};n(585);var de=function(e){var t=e.type,n=e.title,i=e.disabled,r=e.onClick,c=void 0===r?Function.prototype:r,o=Object(j.useCallback)((function(e){c(e.target.value)}),[c]);return Object(a.jsx)("button",{className:"button",type:t,disabled:i,onClick:o,children:n})};function ve(e){var t=e.label,n=e.required,i=e.options,r=t&&!1!==(null===i||void 0===i?void 0:i.label);return Object(a.jsxs)("div",{className:"form-field",children:[Object(a.jsx)("div",{className:"form-field__title",children:r&&(n?"".concat(t,"*"):t)}),Object(a.jsx)("div",{className:g()("form-field__input",(null===i||void 0===i?void 0:i.fluid)&&"form-field__input--fluid"),children:e.children}),(null===i||void 0===i?void 0:i.help)&&Object(a.jsx)("div",{className:"form-field__description",children:i.help})]})}var me=Object(ce.b)({widgets:{BaseInput:function(e){var t,n=e.value,i=e.required,r=e.placeholder,c=e.type,o=void 0===c?"text":c,s=e.rawErrors,l=void 0===s?[]:s,u=e.onChange,d=Object(j.useCallback)((function(e){u(e)}),[u]);return Object(a.jsx)(ve,Object(h.a)(Object(h.a)({},e),{},{children:Object(a.jsx)(le,{type:o,value:n,required:i,placeholder:r,onChange:d,errors:null!==(t=null===l||void 0===l?void 0:l.slice(0,1))&&void 0!==t?t:[]})}))},CheckboxWidget:function(e){var t,n=e.value,i=e.label,r=e.rawErrors,c=void 0===r?[]:r,o=e.onChange,s=Object(j.useCallback)((function(e){o(e)}),[o]);return Object(a.jsx)(ve,Object(h.a)(Object(h.a)({},e),{},{children:Object(a.jsx)(ue,{value:n,label:i,onChange:s,errors:null!==(t=null===c||void 0===c?void 0:c.slice(0,1))&&void 0!==t?t:[]})}))},SelectWidget:function(e){var t=e.options,n=e.value,i=e.onChange;return Object(a.jsx)(ve,Object(h.a)(Object(h.a)({},e),{},{children:Object(a.jsx)(se,{options:t.enumOptions,value:n,onChange:i})}))},ButtonWidget:function(e){var t,n=e.options,i=e.disabled,r=void 0!==i&&i;return Object(a.jsx)(ve,Object(h.a)(Object(h.a)({},e),{},{children:Object(a.jsx)(de,{type:null!==(t=null===n||void 0===n?void 0:n.inputType)&&void 0!==t?t:"submit",title:null===n||void 0===n?void 0:n.title,disabled:r,onClick:null===n||void 0===n?void 0:n.onClick})}))}},FieldTemplate:function(e){return e.children},ArrayFieldTemplate:function(e){return e.items.map((function(e){return Object(a.jsx)(p.a.Fragment,{children:e.children},e.key)}))},ObjectFieldTemplate:function(e){return Object(a.jsx)("div",{className:"form__section",children:e.properties.map((function(e){return Object(a.jsx)("div",{className:"form__section-item",children:e.content},e.name)}))})},customFormats:{email:function(e){return!e.length||/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/.test(e)}},showErrorList:!1,noHtml5Validate:!1,liveValidate:!0});var fe=function(e){var t=e.schema,n=void 0===t?{}:t,i=e.uiSchema,r=void 0===i?{}:i,c=e.defaultFormData,o=void 0===c?null:c,s=e.showErrorList,l=void 0!==s&&s,u=e.noHtml5Validate,d=void 0!==u&&u,v=e.liveValidate,m=void 0===v||v,f=e.transformErrors,b=void 0===f?null:f,h=e.validate,O=void 0===h?null:h,g=e.onChange,x=void 0===g?Function.prototype:g,k=e.onSubmit,_=void 0===k?Function.prototype:k,w=e.onBlur,C=void 0===w?Function.prototype:w,N=e.onError,S=void 0===N?Function.prototype:N,E=e.onFocus,q=void 0===E?Function.prototype:E,F=Object(j.useState)(o),I=Object(y.a)(F,2),D=I[0],L=I[1];Object(j.useEffect)((function(){L(o)}),o);var M=Object(j.useCallback)((function(e){L(e.formData),x(e)}),[x]),B=Object(j.useCallback)((function(e){_(e)}),[_]),U=Object(j.useCallback)((function(e){C(e)}),[C]),P=Object(j.useCallback)((function(e){S(e)}),[S]),z=Object(j.useCallback)((function(e){q(e)}),[q]);return Object(a.jsx)(me,{className:"form",schema:n,uiSchema:r,formData:D,showErrorList:l,noHtml5Validate:d,liveValidate:m,validate:O,transformErrors:b,onChange:M,onSubmit:B,onBlur:U,onError:P,onFocus:z,children:Object(a.jsx)(p.a.Fragment,{})})};var be=n(127),je=n.n(be),pe=n(321),he=n.n(pe);n(586);function Oe(e){var t=e.date,n=e.formatString,i=void 0===n?"YYYY-MM-DDHH:mmZ":n,r=e.originalFormatString,a=e.locale,c=void 0===a?"ru":a,o=je()(Number(t),r,c).locale(c);return o.isValid()?o.format(i):""}je.a.extend(he.a);var ge={schema:{type:"object",properties:{city:{title:"\u0412\u0430\u0448 \u0433\u043e\u0440\u043e\u0434",type:"string",enum:[],enumNames:[]}}},ui:{city:{}},formData:{city:""}},xe={schema:{type:"object",required:["password","repeatPassword"],properties:{password:{title:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"string"},repeatPassword:{title:"\u041f\u0430\u0440\u043e\u043b\u044c \u0435\u0449\u0435 \u0440\u0430\u0437",type:"string"}}},ui:{password:{"ui:widget":"password","ui:placeholder":"\u041f\u0430\u0440\u043e\u043b\u044c","ui:help":"\u0412\u0430\u0448 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 5 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"},repeatPassword:{"ui:widget":"password","ui:placeholder":"\u041f\u0430\u0440\u043e\u043b\u044c \u0435\u0449\u0435 \u0440\u0430\u0437","ui:help":"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u044d\u0442\u043e \u043e\u0431\u0435\u0437\u043e\u043f\u0430\u0441\u0438\u0442 \u0432\u0430\u0441 \u0441 \u043d\u0430\u043c\u0438 \u043d\u0430 \u0441\u043b\u0443\u0447\u0430\u0439 \u043e\u0448\u0438\u0431\u043a\u0438."}},formData:{password:"",repeatPassword:""}},ye={schema:{type:"object",required:["email"],properties:{email:{title:"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430",type:"string",format:"email"},personalAgreement:{title:"\u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0442\u044c \u0430\u043a\u0442\u0443\u0430\u043b\u044c\u043d\u0443\u044e \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043d\u0430 \u0435\u043c\u0435\u0439\u043b",type:"boolean"},saveButton:{type:"string"}}},ui:{email:{"ui:placeholder":"e-mail","ui:help":"\u041c\u043e\u0436\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0430\u0434\u0440\u0435\u0441, \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0439 \u043f\u0440\u0438 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438."},personalAgreement:{"ui:options":{fluid:!0,label:!1}},saveButton:{"ui:widget":"ButtonWidget","ui:title":"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c","ui:help":"","ui:options":{label:!1,fluid:!0,inputType:"submit"}}},formData:{email:"",personalAgreement:!1}};var ke=function(e){var t=e.lastModified,n=void 0===t?null:t,i=e.availableCities,r=void 0===i?{}:i,c=e.defaultFormData,o=void 0===c?{}:c,s=e.onSubmit,l=void 0===s?Function.prototype:s,u=e.onChange,d=void 0===u?Function.prototype:u,v=Object(j.useCallback)((function(e){l(e.formData)})),m=Object(j.useCallback)((function(e){d(e)})),f=Object(j.useCallback)((function(e){return function(e){if(e&&e.length){var t,n=Object(ie.a)(e);try{for(n.s();!(t=n.n()).done;){var i=t.value,r="";switch(i.name){case"$ref":r="\u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430 \u0441\u0445\u0435\u043c\u0430 "+i.params.ref;break;case"additionalItems":var a=i.params.limit;r="",r+="\u0434\u043e\u043b\u0436\u043d\u043e \u0438\u043c\u0435\u0442\u044c \u043d\u0435 \u0431\u043e\u043b\u0435\u0435, \u0447\u0435\u043c "+a+" \u044d\u043b\u0435\u043c\u0435\u043d\u0442",a>=2&&a<=4?r+="\u0430":1!==a&&(r+="\u043e\u0432");break;case"additionalProperties":r="\u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0438\u043c\u0435\u0442\u044c \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u043e\u043b\u044f";break;case"anyOf":r='\u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u043e\u0432\u0430\u0442\u044c \u043e\u0434\u043d\u043e\u0439 \u0438\u0445 \u0441\u0445\u0435\u043c \u0432 "anyOf"';break;case"const":r="\u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0440\u0430\u0432\u043d\u043e \u0437\u0430\u0434\u0430\u043d\u043d\u043e\u043c\u0443 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044e";break;case"contains":r="\u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0435\u0435 \u0441\u0445\u0435\u043c\u0435";break;case"custom":r='\u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u0430\u0432\u0438\u043b\u0443 "'+i.name+'"';break;case"dependencies":var c=i.params.depsCount;r="",r+="\u0434\u043e\u043b\u0436\u043d\u043e \u0438\u043c\u0435\u0442\u044c \u043f\u043e\u043b",r+=1===c?"\u0435":"\u044f",r+=" "+i.params.deps+", \u043a\u043e\u0433\u0434\u0430 \u043f\u0440\u0438\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u043f\u043e\u043b\u0435 "+i.params.property;break;case"enum":r='\u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0440\u0430\u0432\u0435\u043d \u043e\u0434\u043d\u043e\u043c\u0443 \u0438\u0437 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439 \u0432 "enum"';break;case"exclusiveMaximum":var o=i.params.comparison+" "+i.params.limit;r="",r+="\u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c "+o;break;case"exclusiveMinimum":var s=i.params.comparison+" "+i.params.limit;r="",r+="\u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c "+s;break;case"false schema":r="\u0441\u0445\u0435\u043c\u0430 \u0440\u0430\u0432\u043d\u0430 false";break;case"format":if("email"===i.params.format){r="\u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u043b\u0438\u0434\u043d\u044b\u0439 email";break}r='\u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u043e\u0432\u0430\u0442\u044c \u0444\u043e\u0440\u043c\u0430\u0442\u0443 "'+i.params.format+'"';break;case"formatExclusiveMaximum":r="formatExclusiveMaximum \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c boolean";break;case"formatExclusiveMinimum":r="formatExclusiveMinimum \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c boolean";break;case"formatMaximum":var l=i.params.comparison+" "+i.params.limit;r="",r+="\u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c "+l;break;case"formatMinimum":var u=i.params.comparison+" "+i.params.limit;r="",r+="\u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c "+u;break;case"if":r='\u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u043e\u0432\u0430\u0442\u044c \u0441\u0445\u0435\u043ce "'+i.params.failingKeyword+'"';break;case"maximum":var d=i.params.comparison+" "+i.params.limit;r="",r+="\u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c "+d;break;case"maxItems":var v=i.params.limit;r="",r+="\u0434\u043e\u043b\u0436\u043d\u043e \u0438\u043c\u0435\u0442\u044c \u043d\u0435 \u0431\u043e\u043b\u0435\u0435, \u0447\u0435\u043c "+v+" \u044d\u043b\u0435\u043c\u0435\u043d\u0442",v>=2&&v<=4?r+="\u0430":1!==v&&(r+="\u043e\u0432");break;case"maxLength":var m=i.params.limit;r="",r+="\u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043d\u0435 \u0434\u043b\u0438\u043d\u043d\u0435\u0435, \u0447\u0435\u043c "+m+" \u0441\u0438\u043c\u0432\u043e\u043b",m>=2&&m<=4?r+="\u0430":1!==m&&(r+="\u043e\u0432");break;case"maxProperties":var f=i.params.limit;r="",r+="\u0434\u043e\u043b\u0436\u043d\u043e \u0438\u043c\u0435\u0442\u044c \u043d\u0435 \u0431\u043e\u043b\u0435\u0435, \u0447\u0435\u043c "+f+" \u043f\u043e\u043b",r+=1===f?"\u0435":f>=2&&f<=4?"\u044f":"\u0435\u0439";break;case"minimum":var b=i.params.comparison+" "+i.params.limit;r="",r+="\u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c "+b;break;case"minItems":var j=i.params.limit;r="",r+="\u0434\u043e\u043b\u0436\u043d\u043e \u0438\u043c\u0435\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u0435\u0435, \u0447\u0435\u043c "+j+" \u044d\u043b\u0435\u043c\u0435\u043d\u0442",j>=2&&j<=4?r+="\u0430":1!==j&&(r+="\u043e\u0432");break;case"minLength":var p=i.params.limit;r="",r+="\u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043d\u0435 \u043a\u043e\u0440\u043e\u0447\u0435, \u0447\u0435\u043c "+p+" \u0441\u0438\u043c\u0432\u043e\u043b",p>=2&&p<=4?r+="\u0430":1!==p&&(r+="\u043e\u0432");break;case"minProperties":var h=i.params.limit;r="",r+="\u0434\u043e\u043b\u0436\u043d\u043e \u0438\u043c\u0435\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u0435\u0435, \u0447\u0435\u043c "+h+" \u043f\u043e\u043b",r+=1===h?"\u0435":h>=2&&h<=4?"\u044f":"\u0435\u0439";break;case"multipleOf":r="\u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043a\u0440\u0430\u0442\u043d\u044b\u043c "+i.params.multipleOf;break;case"not":r='\u0434\u043e\u043b\u0436\u043d\u043e \u043d\u0435 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u043e\u0432\u0430\u0442\u044c \u0441\u0445\u0435\u043c\u0435 \u0432 "not"';break;case"oneOf":r='\u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u043e\u0432\u0430\u0442\u044c \u0432 \u0442\u043e\u0447\u043d\u043e\u0441\u0442\u0438 \u043e\u0434\u043d\u043e\u0439 \u0441\u0445\u0435\u043ce \u0432 "oneOf"';break;case"pattern":r='\u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u043e\u0432\u0430\u0442\u044c \u043e\u0431\u0440\u0430\u0437\u0446\u0443 "'+i.params.pattern+'"';break;case"patternRequired":r='\u0434\u043e\u043b\u0436\u043d\u043e \u0438\u043c\u0435\u0442\u044c \u043f\u043e\u043b\u0435, \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0435\u0435 \u043e\u0431\u0440\u0430\u0437\u0446\u0443 "'+i.params.missingPattern+'"';break;case"propertyNames":r="\u0438\u043c\u044f \u043f\u043e\u043b\u044f '"+i.params.propertyName+"' \u043d\u0435 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0441\u0445\u0435\u043c\u0435";break;case"required":r="\u043f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f";break;case"switch":r="\u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u0430\u0432\u0438\u043b\u0443 "+i.params.caseIndex+' \u0432 "switch"';break;case"type":r="\u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c "+i.params.type;break;case"uniqueItems":r="\u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0438\u043c\u0435\u0442\u044c \u043f\u043e\u0432\u0442\u043e\u0440\u044f\u044e\u0449\u0438\u0445\u0441\u044f \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432 (\u044d\u043b\u0435\u043c\u0435\u043d\u0442\u044b "+i.params.j+" \u0438 "+i.params.i+" \u0438\u0434\u0435\u043d\u0442\u0438\u0447\u043d\u044b)"}i.message=r}}catch(O){n.e(O)}finally{n.f()}}}(e),e})),b=Object(j.useMemo)((function(){var e,t,n=ae()(ge).schema,i=ae()(xe).schema,a=ae()(ye).schema;return n.properties.city.enum=null!==(e=Object.keys(r))&&void 0!==e?e:[],n.properties.city.enumNames=null!==(t=Object.values(r))&&void 0!==t?t:[],{type:"array",items:[n,i,a]}}),[r]),p=Object(j.useMemo)((function(){var e=ae()(ge).ui,t=ae()(xe).ui,i=ae()(ye).ui,r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!e)return"";var t=Oe({date:e,formatString:"DD MMMM YYYY \u0432 HH:MM:ss"});return t?"\u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f ".concat(t):""}(n);return i.saveButton["ui:help"]=r?"\u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f ".concat(r):null,{items:[e,t,i]}}),[n]),h=Object(j.useMemo)((function(){var e=ae()(ge).formData,t=ae()(xe).formData,n=ae()(ye).formData;return e.city=o.city,n.email=o.email,n.personalAgreement=!!o.personalAgreement,[e,t,n]}),[o]),O=Object(j.useCallback)((function(e,t){var n,i,r,a,c=null!==(n=null===(i=e[1])||void 0===i?void 0:i.password)&&void 0!==n?n:null,o=null!==(r=null===(a=e[1])||void 0===a?void 0:a.repeatPassword)&&void 0!==r?r:null;return c.length&&c!==o&&t[1].repeatPassword.addError("\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442"),t}));return Object(a.jsx)(fe,{schema:b,uiSchema:p,defaultFormData:h,transformErrors:f,validate:O,onChange:m,onSubmit:v})},_e=n(322),we=n.n(_e),Ce=n(198),Ne=n.n(Ce);n(588);var Se=function(e){var t=e.name,n=void 0===t?"":t,i=e.defaultStatus,r=void 0===i?"":i,c=e.onUpdate,o=void 0===c?Function.prototype:c,s=Object(j.useRef)(r),l=Object(j.useRef)(null),u=Object(j.useState)(0),d=Object(y.a)(u,2),v=d[0],m=d[1],f=Object(j.useState)(!1),b=Object(y.a)(f,2),p=b[0],h=b[1],O=Object(j.useCallback)((function(e){s.current=e.target.value,m(Ne()(s.current).length)}),[]),g=Object(j.useCallback)((function(e){if(e.which&&(8===e.which||37===e.which||39===e.which))return!0;Ne()(s.current).length>=150&&e.preventDefault()}),[]),x=Object(j.useCallback)((function(e){e.target.closest(".personal-user-info__status-input")||e.target.closest(".personal-user-info__action")||h(!1)}),[]),k=Object(j.useCallback)((function(){h((function(e){return!e}))}),[]);return Object(j.useEffect)((function(){p?l.current.focus():o(s.current)}),[p]),Object(j.useEffect)((function(){return m(r.length),l.current.oncontextmenu=function(){return!1},l.current.onpaste=function(){return!1},l.current.oncut=function(){return!1},document.addEventListener("click",x),function(){document.removeEventListener("click",x)}}),[]),Object(a.jsxs)("div",{className:"personal-user-info",children:[Object(a.jsx)("div",{className:"personal-user-info__greetings",children:"\u0417\u0434\u0440\u0430\u0432\u0441\u0442\u0432\u0443\u0439\u0442\u0435,"}),Object(a.jsxs)("div",{className:"personal-user-info__info-wrapper",children:[Object(a.jsxs)("div",{className:"personal-user-info__info",children:[Object(a.jsx)("div",{className:"personal-user-info__name",children:n}),Object(a.jsx)("a",{href:"#",className:"personal-user-info__action link link--action",onClick:k,children:p?"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c":"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441"})]}),Object(a.jsx)("div",{className:"personal-user-info__status-box",children:Object(a.jsx)(we.a,{className:"personal-user-info__status-input",html:s.current,innerRef:l,disabled:!p,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0442\u0430\u0442\u0443\u0441...",onChange:O,onKeyDown:g})}),p&&Object(a.jsxs)("div",{className:"personal-user-info__note",children:["\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u043c: ",v," / ",150]})]})]})};var Ee=function(e){var t=e.user,n=void 0===t?{}:t,i=e.cities,r=void 0===i?{}:i,c=e.getCitiesList,o=void 0===c?Function.prototype:c,s=e.getUserInfo,l=void 0===s?Function.prototype:s,u=e.error,d=void 0!==u&&u,v=e.loading,m=void 0===v||v,f=Object(j.useState)(n.status),b=Object(y.a)(f,2),p=b[0],O=b[1],g=Object(j.useState)({city:"",password:"",repeatPassword:"",email:"",personalAgreement:!1}),x=Object(y.a)(g,2),k=x[0],_=x[1];Object(j.useEffect)((function(){o(),l()}),[o,l]),Object(j.useEffect)((function(){_({city:n.cityID,password:"",repeatPassword:"",email:n.email,personalAgreement:!!n.personalAgreement})}),[n]);var w=Object(j.useCallback)((function(e){var t=function(e){var t,n={},i=Object(ie.a)(e);try{for(i.s();!(t=i.n()).done;){var r=t.value;n=Object(h.a)(Object(h.a)({},n),r)}}catch(a){i.e(a)}finally{i.f()}return n}(e);console.log(Object(h.a)(Object(h.a)({},t),{},{status:p}))}),[p]),C=Object(j.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";O(e)}),[]),N={name:n.name,defaultStatus:n.status,onUpdate:C};return n.modifiedTime,n.cityID,n.email,n.personalAgreement,d?Object(a.jsx)("div",{children:"error"}):m?Object(a.jsx)("div",{children:"loading..."}):Object(a.jsxs)("div",{className:"personal-settings",children:[Object(a.jsx)("div",{className:"personal-settings__user",children:Object(a.jsx)(Se,Object(h.a)({},N))}),Object(a.jsx)("div",{className:"personal-settings__params",children:Object(a.jsx)(ke,{defaultFormData:k,lastModified:n.modifiedTime,availableCities:r,onSubmit:w})})]})},qe=Object(l.b)((function(e,t){return{user:e.users.entities[t.userId],cities:De(e),loading:Le(e,t),error:Me(e,t)}}),(function(e,t){return{getCitiesList:function(){return e(ee())},getUserInfo:function(){return e(W(t.userId))}}}))(Ee),Fe=function(e){return e.cities.requests.list||void 0},Ie=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.users.requests[null===t||void 0===t?void 0:t.userId]||void 0},De=Object(k.a)((function(e){return e.cities.entities}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.entries(e).filter(n).map(i);return Object.fromEntries(t);function n(e){var t=Object(y.a)(e,2);t[0];return t[1].population>=5e3}function i(e){var t=Object(y.a)(e,2);return[t[0],t[1].name]}})),Le=Object(k.a)(Fe,Ie,(function(e,t){return!e||(!t||("pending"===e||"pending"===t))})),Me=Object(k.a)(Fe,Ie,(function(e,t){return"rejected"===e||"rejected"===t})),Be=function(){return Object(a.jsx)(p.a.Fragment,{children:Object(a.jsx)(x,{children:Object(a.jsx)(qe,{userId:"mockUserId"})})})};v.b.add(m.a);var Ue=function(){return Object(a.jsx)(b,{children:Object(a.jsx)(Be,{})})};var Pe=function(){return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(d.c,{children:Object(a.jsx)(d.a,{path:"/",children:Object(a.jsx)(Ue,{})})})})},ze=n(16),Ae=Object(ze.c)({cities:ne,users:K}),Te=Object(s.a)({reducer:Ae,devTools:!1});o.a.render(Object(a.jsx)(l.a,{store:Te,children:Object(a.jsx)(u.a,{children:Object(a.jsx)(Pe,{})})}),document.getElementById("root"))}},[[632,1,2]]]);
//# sourceMappingURL=main.3e40db00.chunk.js.map